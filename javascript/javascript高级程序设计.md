# JavaScript高级程序设计

# 第一章 JavaScript简介

* ECMAScript

  ​	js的语法标准

* DOM

  ​	提供访问和操作网页内容的方法与接口

* BOM

  ​	提供与浏览器交互的方法与接口

## JS单线程

js运作在浏览器中，是单线程的，js代码始终在一个线程上执行，此线程被称为js引擎线程。

`webworker`也只是允许JavaScript脚本创建多个线程，但是子线程完全受主线程控制，且不得操作DOM。

https://blog.csdn.net/github_34514750/article/details/76577663



#  第二章在HTML中使用js

script标签包含的js代码会从上到下依次解释（解释型语言），浏览器运行到一个代码块（包括外部引入的js文件）后，在计算完成结束运行之前，后面的内容都不会被浏览器加载或者显示，所以script标签建议放在文档最后，避免造成页面的卡顿。

**脚本执行和页面的渲染是共用一个线程，不可能同时执行，只能一个执行完后再执行另外一个**



## 使用位置

- 行内

- script标签内嵌入js代码或引入外部js文件

  需要在页面加载之前执行的js代码块放在head标签，需要页面加载完之后执行的js代码块放在body标签最后，放在body内不同标签之间会暂停页面加载去执行js代码，等待这个代码块执行完后才会继续加载页面，易造成卡顿

## script标签的使用

在使用标签嵌入js代码时，不要再js代码部分任何位置出现`</script>`，**包括字符串内**，否则浏览器读取到后，会直接结束这个标签，可以使用转义字符`<\/script>`解决这个问题

**script标签属性**

- 动态生成`<script>`标签：通过JS代码动态生成的script标签时异步的

  需要等同步任务结束后才会加载动态生成的script标签并且谁先生成谁先执行，没有上下文关系

  

- **async  设置异步脚本**

  表示应该立即下载脚本但不阻碍解析脚本之后的文档，而且一旦下载完就立刻异步执行（只对外部引入js有效），目的是不让页面等待下载并执行这个脚本，从而异步加载页面其他内容。所以建议异步脚本不要再加载期间修改DOM，因为不知道它啥时候下载完就立刻执行了。

  

  `async`的设置，会使得`script`脚本异步下载，并且下载完立刻就执行

  

  `async`的脚本之间，并不会按着`script`标签在页面中的顺序来执行，而是谁先下载完谁立刻执行

  所以设置了`async`的脚本之间完全不能预知谁先执行，情况允许下谁先加载完谁就先执行，所以两者不能有耦合

  

  异步脚本一定会在页面`load事件`之前执行，但可能会在`DOMContentLoaded事件`之前或之后运行

  

- **defer  设置延迟**

  表示立刻下载脚本但延迟到文档被完全解析和显示之后按照顺序执行（只对外部引入js有效）

  `defer`脚本会在文档渲染完毕后，`DOMContentLoaded`事件调用前执行。

  

  理论上设置了`defer`的脚本之间条件允许后还是按照先后顺序来执行

  **但现实中，延迟脚本并不一定按照先后顺序来执行，所以还是不建议设置多个延迟脚本**

  

- **src** 

  引入外部js文件地址，可以是本地地址，也可以是网络地址，和image标签的src属性一样

  

- **type**

  type="text/javascript"    ，这个属性可省略

  

只要script标签不包含`defer/async`属性，那浏览器就会按照`script`标签在页面中的先后顺序对他们进行一次解析，也就是第一个script标签解析完成后，第二个script标签才会开始解析。

**defer用在需要操控DOM元素的，async用于与DOM无关的**



## 代码块间变量方法共享条件

JS是按照代码块来进行编译和执行的，代码块间相互独立，一个代码块报错不影响其他代码块

但代码块可以使用之前出现过的代码块（也被叫做已经预处理过的）的变量和方法，无法共享之后出现的代码块的变量和方法，因为后面的代码块还没有解析到，没有进行预处理。



## 文档模式：<!doctype>

文档模式让浏览器解析器知道应该用哪个规范来解析文档。通过html标签前的`<!doctype>`标签进行声明。

设置不同文档模式，主要影响CSS内容的呈现，但在某些情况下也会影响到JavaScript的解释执行。

文档模式包括： 混杂模式（没有声明，默认混杂模式）

​							近似标准模式

​							标准模式

如果在文档开始处没有发现文档类型声明(即`<!doctype>`)，则所有浏览器都会**默认开启混杂模式**。（公司笔试题出现过）

文档模式指的是浏览器解析器解析html的规则，而不是js引擎解析js的规则，与js解析的严格模式、非严格模式不同



# `<noscript>`标签

当用户浏览器未开启或不支持JavaScript时显示的内容

```html
<noscript>
	<p>未开启或不支持JavaScript</p>
</noscript>
```





